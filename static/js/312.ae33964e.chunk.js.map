{"version":3,"file":"static/js/312.ae33964e.chunk.js","mappings":"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","sources":["Components/CRUD/EditProduct.jsx"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useState, useRef, useEffect, useContext } from 'react';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport ProductsContext from '../../ContextApis/ProductsContext';\r\nimport { UsersContext } from '../../ContextApis/UsersContext';\r\n\r\nfunction EditProducts() {\r\n  const navigate = useNavigate();\r\n  const { CurrentUser } = useContext(UsersContext);\r\n  const { deleteProduct, editProduct } = useContext(ProductsContext);\r\n  const inputRef = useRef(null);\r\n  const { id } = useParams();\r\n\r\n  const [prdct, setPrdct] = useState({\r\n    id: id, \r\n    title: '',\r\n    price: 0,\r\n    description: '',\r\n    image:\r\n      'https://www.energyfit.com.mk/wp-content/plugins/ap_background/images/default/default_large.png',\r\n    category: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (CurrentUser?.role !== 'admin') {\r\n      navigate('/Home');\r\n    }\r\n  }, [CurrentUser, navigate]);\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = () => {\r\n      axios\r\n        .get(`http://localhost:2000/products/${id}`)\r\n        .then((res) => {\r\n          setPrdct({\r\n            id: res.data.id,\r\n            title: res.data.title,\r\n            price: res.data.price,\r\n            description: res.data.description,\r\n            image: res.data.image,\r\n            category: res.data.category,\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          console.error('Error fetching product:', err);\r\n          console.log('URL for product fetch:', `http://localhost:2000/products/${id}`);\r\n        });\r\n    };\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setPrdct((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    editProduct(prdct.id, prdct);\r\n    e.preventDefault();\r\n    navigate('/Home');\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await deleteProduct(id);\r\n      navigate('/Home');\r\n    } catch (error) {\r\n      console.error('Error deleting product:', error);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"mt-3 p-5 container w-75 mb-5 mt-5\">\r\n      <h1 className=\"text-center text-dark pb-4\">Edit Product</h1>\r\n      <form onSubmit={handleSubmit} className=\"p-4\">\r\n        <div className=\"form-floating mb-3\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"title\"\r\n            name=\"title\"\r\n            value={prdct.title}\r\n            onChange={handleChange}\r\n            ref={inputRef}\r\n          />\r\n          <label htmlFor=\"title\">Title</label>\r\n        </div>\r\n\r\n        <div className=\"form-floating mb-3\">\r\n          <input\r\n            type=\"number\"\r\n            className=\"form-control\"\r\n            id=\"price\"\r\n            name=\"price\"\r\n            value={prdct.price}\r\n            onChange={handleChange}\r\n          />\r\n          <label htmlFor=\"price\">Price</label>\r\n        </div>\r\n\r\n        <div className=\"form-floating mb-3\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"category\"\r\n            name=\"category\"\r\n            value={prdct.category}\r\n            onChange={handleChange}\r\n          />\r\n          <label htmlFor=\"category\">Category</label>\r\n        </div>\r\n\r\n        <div className=\"form-floating mb-3\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"description\"\r\n            name=\"description\"\r\n            value={prdct.description}\r\n            onChange={handleChange}\r\n          />\r\n          <label htmlFor=\"description\">Description</label>\r\n        </div>\r\n\r\n        <div className=\"form-floating mb-3\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            id=\"image\"\r\n            name=\"image\"\r\n            value={prdct.image}\r\n            onChange={handleChange}\r\n          />\r\n          <label htmlFor=\"image\">Image Url</label>\r\n        </div>\r\n\r\n        <div className=\"mb-3\">\r\n          <div className=\"text-center\">\r\n            <button className=\"btn btn-success mx-2 text-light px-5 py-2 b-0\">\r\n              Edit\r\n            </button>\r\n            <button\r\n              className=\"btn btn-danger mx-2 text-light px-5 py-2 b-0\"\r\n              onClick={handleDelete}\r\n            >\r\n              Delete\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditProducts;"],"names":["navigate","useNavigate","CurrentUser","useContext","UsersContext","deleteProduct","editProduct","ProductsContext","inputRef","useRef","id","useParams","prdct","setPrdct","useState","title","price","description","image","category","useEffect","role","axios","get","concat","then","res","data","catch","err","console","error","log","handleChange","e","name","value","target","prev","_jsxs","className","children","_jsx","onSubmit","preventDefault","type","onChange","ref","htmlFor","onClick","async"],"sourceRoot":""}